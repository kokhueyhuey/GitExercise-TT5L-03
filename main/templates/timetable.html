{% extends 'base.html' %}
{% load templatetags %}
{% block content %}

<div id="calendar-container">
    <div id="calendar"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/dayjs"></script>
<link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.0/main.min.css' rel='stylesheet' />
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.0/main.min.js'></script>

<style>
    #calendar-container {
        width: 70%; /* Adjust the width as needed */
        margin: 40px auto; /* Center the calendar horizontally and add top margin */
        padding: 20px; /* Optional padding */
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Optional shadow for styling */
        background-color: #ffffffc3; /* Background color for better contrast */
        border-radius: 10px; /* Rounded corners */
    }

    #calendar {
        width: 100%; /* Ensure the calendar takes full width of the container */
        max-width: 100%; /* Ensure it doesn't exceed the container's width */
    }

    .fc-event-title {
        color: black;
        font-size: larger;
    }

    /* Increase row height */
    .fc-timegrid-slot {
        height: 50px !important; /* Adjust the height value as needed */
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const calendarEl = document.getElementById('calendar');
        const calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'timeGridWeek',
            slotDuration: '01:00:00',
            slotMinTime: '09:00:00',
            slotMaxTime: '18:00:00',
            slotLabelFormat: {
                hour: '2-digit',
                minute: '2-digit',
                meridian: 'short'
            },
            allDaySlot: false,
            height: 'auto', /* Adjusts the height of the calendar to fit its container */
            expandRows: true, /* Ensures all rows have the same height */
            contentHeight: 'auto', /* Adjusts the height of the calendar content */
            events: [],
            eventClick: function(info) {
                alert(info.event.extendedProps.description);
            },
        });

        calendar.render();

        fetch("{% url 'get_booking' %}")
        .then(response => response.json())
        .then(events => {
            events.forEach(event => {
                calendar.addEvent(event);
            });
        });
    });
</script>

{% endblock %}